---
title: 第一笔链上交易
weight: 7
---


这篇文章指导你如何在 starcoin 区块链上执行自己的第一笔交易。
在这之前，建议你先阅读 tech 相关的文章，对 starcoin 的基本概念有一定了解。

<!--more-->

## 前提

假设你已经在本地跑起来一个 starcoin dev 节点。


## 提交交易的几个步骤

- 启动 starcoin 控制台，并连接到 starcoin 节点，详细步骤请查阅[使用 strcoin 控制台](./console)。
- 创建两个账户，Alice,Bob, 详细步骤请查阅[账号管理](./account_manager)。
- 给 Alice 账户挖钱。
- 提交转账交易：Alice 给 Bob 打钱。


### 创建账户

连接到节点后，我们先来创建两个账户。这里我们假设两个账号已经创建成功，Alice 是默认账号，的地址是 0x1d8133a0c1a07366de459fb08d28d2a6， Bob 的地址是 0xbfbed907d7ba364e1445b971f9182949。

### 使用 Faucet 给账户充钱

 Dev 环境下，可以利用 faucet 给账户充钱。faucet 只在 dev 和 test net 中存在，以便于开发者做开发和测试。
 下面我们就通过 console 给 Alice 充钱。

``` bash
starcoin% dev get_coin -v 5000000
+-----------------+------------------------------------------------------------------+
| gas_unit_price  | 1                                                                |
+-----------------+------------------------------------------------------------------+
| id              | 65610116a010de657c9faeca94c2b91b9e4fd36f62bc8d7ccbdbb6fdd2e64769 |
+-----------------+------------------------------------------------------------------+
| max_gas_amount  | 2000000                                                          |
+-----------------+------------------------------------------------------------------+
| sender          | 0000000000000000000000000a550c18                                 |
+-----------------+------------------------------------------------------------------+
| sequence_number | 1                                                                |
+-----------------+------------------------------------------------------------------+
```


`dev get_coin` 会往默认账户中充钱，如果链上不存在这个账户，它会先创建这个账户，然后再往该账户转入 `-v` 指定数量的 coin。
 命令输出的是以 faucet 账户（地址是 `0000000000000000000000000a550c18` ）发出的交易信息。

等待几秒钟，然后再查看账户信息。

```bash
starcoin% account show 1d8133a0c1a07366de459fb08d28d2a6
+--------------------+------------------------------------------------------------------+
| account.address    | 1d8133a0c1a07366de459fb08d28d2a6                                 |
+--------------------+------------------------------------------------------------------+
| account.is_default | false                                                            |
+--------------------+------------------------------------------------------------------+
| account.public_key | 7add08c841d0f99f1f90ea2632c72aee483fab882e0d8d6d6defed2f1987345d |
+--------------------+------------------------------------------------------------------+
| auth_key_prefix    | 7bc6066656bb248755686d2ab78aef14                                 |
+--------------------+------------------------------------------------------------------+
| balances.STC       | 5000000                                                          |
+--------------------+------------------------------------------------------------------+
| sequence_number    | 0                                                                |
+--------------------+------------------------------------------------------------------+
```

可以看到 `balances` 和 `sequence_number` 有数据了。

### 提交交易 - 转账


首先需要解锁 Alice 的账户，授权 node 使用 alice 的私钥对交易签名。

``` bash
account unlock -p my-pass 1d8133a0c1a07366de459fb08d28d2a6
```
其中 `-p my-pass` 是创建账户时传入的密码。

账户解锁后，执行以下命令：

```bash
starcoin% txn transfer -f 1d8133a0c1a07366de459fb08d28d2a6 -t bfbed907d7ba364e1445b971f9182949 -k 7add08c841d0f99f1f90ea2632c72aee483fab882e0d8d6d6defed2f1987345d -v 10000
+-----------------+------------------------------------------------------------------+
| gas_unit_price  | 1                                                                |
+-----------------+------------------------------------------------------------------+
| id              | 44433463c38aacd31731fba1a38d3a38f9a14c0281a264634e470c8f25bd557d |
+-----------------+------------------------------------------------------------------+
| max_gas_amount  | 1000000                                                          |
+-----------------+------------------------------------------------------------------+
| sender          | 1d8133a0c1a07366de459fb08d28d2a6                                 |
+-----------------+------------------------------------------------------------------+
| sequence_number | 0                                                                |
+-----------------+------------------------------------------------------------------+
```

其中：

- `-f 1d8133a0c1a07366de459fb08d28d2a6`: 是 Alice 的账户地址。
- `-t bfbed907d7ba364e1445b971f9182949`：是 Bob 的账户地址。
- `-k 7add08c841d0f99f1f90ea2632c72aee483fab882e0d8d6d6defed2f1987345d`：是 Bob 的公钥。

> 如果，Bob 的账户在链上还不存在，需要提供他的公钥，转账交易会自动在链上创建 Bob 的账户。


此时，交易已经被提交到链上。还需要等待几秒（dev 环境出块时间比较短），让交易上链。然后再查看 Bob 的账户信息：


``` bash
starcoin% account show bfbed907d7ba364e1445b971f9182949
+--------------------+------------------------------------------------------------------+
| account.address    | bfbed907d7ba364e1445b971f9182949                                 |
+--------------------+------------------------------------------------------------------+
| account.is_default | false                                                            |
+--------------------+------------------------------------------------------------------+
| account.public_key | d80234b11619e62a62fac048b2b79a9eec1727b476155e1f8fe19c89c7443076 |
+--------------------+------------------------------------------------------------------+
| auth_key_prefix    | 7c87272c7fc2f5586a0770d1d718f14f                                 |
+--------------------+------------------------------------------------------------------+
| balances.STC       | 10000                                                            |
+--------------------+------------------------------------------------------------------+
| sequence_number    | 0                                                                |
+--------------------+------------------------------------------------------------------+
```

可以发现：Bob 账户已经有钱了。


至此，你已经成功完成了一笔链上转账！

